import module "http://marklogic.com/xdmp/tde" at "/MarkLogic/tde.xqy";

let $marketing-contacts-template := 
<template xmlns="http://marklogic.com/xdmp/tde">
  <context>/envelope/canonical</context>
  <rows> 
    <row> 
      <schema-name>customer360</schema-name> 
      <view-name>marketing_contacts</view-name> 
      <columns> 
        <column>
          <name>first_name</name> 
          <scalar-type>string</scalar-type> 
          <val>firstName</val> 
          <nullable>true</nullable> 
        </column> 
        <column>
          <name>last_name</name> 
          <scalar-type>string</scalar-type> 
          <val>lastName</val> 
          <nullable>true</nullable> 
        </column>         
        <column>
          <name>company</name> 
          <scalar-type>string</scalar-type> 
          <val>company</val> 
          <nullable>true</nullable> 
        </column>
        <column>
          <name>address</name> 
          <scalar-type>string</scalar-type> 
          <val>address</val> 
          <nullable>true</nullable> 
        </column>                
        <column>
          <name>city</name> 
          <scalar-type>string</scalar-type> 
          <val>city</val> 
          <nullable>true</nullable>  
        </column>
        <column>
          <name>state</name> 
          <scalar-type>string</scalar-type> 
          <val>state</val> 
          <nullable>true</nullable> 
        </column>
        <column>
          <name>zip</name> 
          <scalar-type>string</scalar-type> 
          <val>zip</val> 
          <nullable>true</nullable> 
        </column>
        <column>
          <name>phone_work</name> 
          <scalar-type>string</scalar-type> 
          <val>phoneWork</val> 
          <nullable>true</nullable> 
        </column>
        <column>
          <name>phone_mobile</name> 
          <scalar-type>string</scalar-type> 
          <val>phoneMobile</val> 
          <nullable>true</nullable> 
        </column> 
        <column>
          <name>phone_home</name> 
          <scalar-type>string</scalar-type> 
          <val>phoneHome</val> 
          <nullable>true</nullable> 
        </column>               
        <column>
          <name>email</name> 
          <scalar-type>string</scalar-type> 
          <val>email</val> 
          <nullable>true</nullable> 
        </column>
        <column>
          <name>mail_ok</name> 
          <scalar-type>string</scalar-type> 
          <val>mailOk/mailok</val> 
          <nullable>true</nullable> 
        </column>
        <column>
          <name>email_ok</name> 
          <scalar-type>string</scalar-type> 
          <val>emailOk</val> 
          <nullable>true</nullable> 
        </column>        
        <column>
          <name>frequency</name> 
          <scalar-type>string</scalar-type> 
          <val>frequency</val> 
          <nullable>true</nullable> 
        </column> 
        <column>
          <name>uri</name>
          <scalar-type>string</scalar-type>
          <val>xdmp:node-uri(.)</val>
          <nullable>true</nullable>
        </column>                              
      </columns>
    </row>
  </rows>
</template>

return tde:template-insert("/templates/marketing-contacts-template.xml", $marketing-contacts-template)