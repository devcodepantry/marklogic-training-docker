<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MarkLogic Data Integration</title>
<link href="../css/ml.css" rel="stylesheet" type="text/css">
</head>

<body>
<p><img src="../images/general/Marklogic-University-RGB.png" alt="" width="130" height="38" class="logo-padding"/></p>
<p class="topic-heading"><strong>Generating Model-Driven Components</strong></p>
<p>Many useful things can be generated from a model descriptor, including functions for converting source documents to entity instances, TDE (Template Driven Extraction) templates, an XML schema, database index settings, and Search API options for querying  entities.</p>
<p>A <strong>conversion module </strong>containing functions for converting source documents to entity instances  can be generated.</p>
<p>A <strong>TDE template </strong> can be generated, to be able to  query row data  from entity instances, using SQL or the Optic API. </p>
<p>An <strong>XML schema </strong>can be generated, to validate entity instances. </p>
<p>Database<strong> index settings</strong> for range indexes and word lexicons, as well as <strong>Search API options </strong>for querying the entity instances through the Search API, REST, Java or Node.js programming interfaces, can be generated. (e.g. To have query results come from just the canonical section of an envelope document.)</p>
<p>Detail on the various artifacts that can be generated is in the Interaction with Generated Artifacts section of the Entity Services Developer's Guide at docs.marklogic.com/guide/entity-services/models#id_81460. </p>
<p class="topic-sub-heading">Generating a Conversion Module</p>
<p>For converting source documents to entity instances, a conversion module can be generated by calling  the <strong>es.instanceConverterGenerate()</strong> function.</p>
<p class="code">'use strict';<br>
  const es = require('/MarkLogic/entity-services/entity-services.xqy');<br>
  <br>
  const desc = cts.doc('/es/models/procycling-0.0.1.json');<br>
  <br>
xdmp.save('/home/cent/Desktop/mls-data-integration/es/' + 'procycling-0.0.1-conv.xqy', es.instanceConverterGenerate(desc));</p>
<p>By saving the file to disk, it can be put in a version control system, edited, and then loaded into a modules database to make its functions available for use.</p>
<p class="topic-sub-heading">Generating a TDE Template</p>
<p>To generate a template from the descriptor file, the JavaScript <strong>es.extractionTemplateGenerate()</strong> function, or the XQuery <strong>es:extraction-template-generate()</strong> function,   can be used.</p>
<p class="code">'use strict';<br>
const es = require('/MarkLogic/entity-services/entity-services.xqy');<br>
<br>
const template =
es.extractionTemplateGenerate(cts.doc('/es/models/procycling-0.0.1.json&quot;'));</p>
<p class="code">xdmp.save('/home/cent/Desktop/mls-data-integration/es/' + 'procycling-0.0.1-tde.tdex', template);</p>
<p>When generating the template, it can be saved to disk, or it can be directly inserted into the database, for storage in the schemas database. </p>
<p class="topic-sub-heading">Location of Generated Components</p>
<p>The  destination that generated components should go to depends on the type of component.</p>
<p>A <strong>conversion module</strong> is commonly written to disk, to possibly be put under version control, to  then be edited,  to then be put into a <strong>modules database</strong> for use.</p>
<p>A <strong>template</strong> is commonly put into a <strong>schemas database</strong>, for use.</p>
<p>The database configuration settings (e.g. <strong>range indexes</strong>, <strong>lexicons</strong>) are generally applied to a database through <strong>REST</strong> or ml-gradle.</p>
<p><strong>Search API query options</strong> are commonly used as part of a <strong>query</strong> (e.g. used with search:search()).</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Next: <a href="0805_x_generate_a_model-driven_component.htm" class="exercise-link">Exercise (Generate a Model-Driven Component)</a></p>
<p>Back: <a href="0804_x_store_a_model.htm">Previous</a></p>
<hr>
<p class="copyright">Â©2017-2018 MarkLogic Corporation. All rights reserved. Copying, selling, or otherwise distributing any part of this course without prior written consent of an authorized representative of MarkLogic Corporation is prohibited.</p>
</body>
</html>
